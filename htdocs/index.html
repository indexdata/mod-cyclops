<html>
 <head>
  <title>Welcome to mod-cyclops</title>
  <style>
    .link-button {
      background: none;
      border: none;
      color: blue;
      padding: 0;
      font: inherit;
      text-decoration: underline;
      cursor: pointer;
    }
    .link-button:visited {
      color: purple;
    }
  </style>
  <script>
    function postData(path, data) {
      fetch(path, {
	method: 'POST',
	headers: {
	  'Content-Type': 'application/json'
	},
	body: JSON.stringify(data)
      })
      .then(async (response) => {
	if (!response.ok) {
	  const errorText = await response.text().catch(() => '');
	  alert(`Request failed with status ${response.status}: ${errorText}`);
	} else {
	  const result = await response.json().catch(() => null);
	  alert('Success:', result);
	}
      })
      .catch((error) => {
	alert(`POST to ${path} failed:`, error);
      });
    }
  </script>
 </head>
 <body>
  This is
  <a href="https://github.com/indexdata/mod-cyclops/">mod-cyclops</a>.
  Try:
  <ul>
   <li><a href="/admin/health">health check</a></li>
   <li><a href="/htdocs/">static area</a></li>
   <li><a href="/favicon.ico">favicon</a> (representing
       <a href="https://svpow.com/2011/02/23/please-welcome-brontomerus-mcintoshi-2/">the ilium of <i>Brontomerus</i></a>)</li>
   <li><a href="/path/to/nowhere">a bad URL</a></li>
  </ul>
  And the actual web services:
  <ul>
   <li><a href="/cyclops/tags">list of tags</a></li>
   <li><button class="link-button" onclick="postData('/cyclops/tags', { name: 'dino' })">define tag "dino"</button></li>
   <li><a href="/cyclops/filters">list of filters</a></li>
   <li><button class="link-button" onclick="postData('/cyclops/filters', { name: 'jurassic', cond: '143100000 <= age AND age <= 201400000' })">define filter "jurassic"</button></li>
   <li><a href="/cyclops/sets">list of sets</a></li>
   <li><button class="link-button" onclick="postData('/cyclops/sets', { name: 'mike' })">create set "mike"</button></li>
   <li><a href="/cyclops/sets/mike">records from set <code>mike</code></a></li>
   <li><button class="link-button" onclick="postData('/cyclops/sets/mike', { op: 'add', from: 'allobjects', cond: 'date >= 2025-01-01', filter: 'jurassic', tag: 'dino,ptero' })">add objects to set "mike"</button></li>
   <li><button class="link-button" onclick="postData('/cyclops/sets/mike', { op: 'remove', cond: 'date < 2025-01-01', filter: 'cretaceous', omitTag: 'ptero,croc' })">remove objects from set "mike"</button></li>
   <li><button class="link-button" onclick="postData('/cyclops/sets/mike/tag/dino', { op: 'add', cond: 'title LIKE %saur', filter: 'ptero' })">add tag "dino" to records in set "mike"</button></li>
   <li><button class="link-button" onclick="postData('/cyclops/sets/mike/tag/dino', { op: 'remove', cond: 'author LIKE %taylor%', filter: 'dino' })">remove tag "dino" from records in set "mike"</button></li>
  </ul>
 </body>
</html>
